{"id":8923,"date":"2021-04-19T14:40:54","date_gmt":"2021-04-19T21:40:54","guid":{"rendered":"https:\/\/joinhandshake.com\/?post_type=our-team&#038;p=8923"},"modified":"2021-04-19T14:44:22","modified_gmt":"2021-04-19T21:44:22","slug":"implementing-custom-pagination-with-graphql-ruby","status":"publish","type":"our-team","link":"https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/","title":{"rendered":"Implementing Custom Pagination With GraphQL-Ruby"},"content":{"rendered":"\n<p>Here at Handshake, we recently began a project to start replacing some of the REST API endpoints in our Ruby on Rails application with GraphQL, using the<a href=\"https:\/\/graphql-ruby.org\/\" target=\"_blank\" rel=\"noreferrer noopener\"> <u>GraphQL Ruby<\/u><\/a> Gem. At first it was smooth sailing with GraphQL; we were converting our models to GraphQL and writing the simple queries we were starting out with ease.<\/p>\n\n\n\n<p>Then came the first time when we had to add pagination to a query.<\/p>\n\n\n\n<p>In GraphQL, the standard way of implementing pagination is by using the <a href=\"https:\/\/graphql.org\/learn\/pagination\/#pagination-and-edges\" target=\"_blank\" rel=\"noreferrer noopener\"><u>Connection<\/u><\/a> model. Put simply, Connections are a wrapper a level above the object you\u2019re paginating that handles the pagination. They accept arguments for the number of results to retrieve and a cursor, perform the pagination, and then return the paginated result along with the current cursor and any other metadata you define. Despite the \u201ccursor\u201d terminology, Connections don\u2019t have to use cursor-based pagination. The cursor could also be an offset.<\/p>\n\n\n\n<p>The GraphQL documentation is useful in telling you <em>what<\/em> Connections are, but isn\u2019t going to tell you anything about <em>how<\/em> to implement them in your language and GraphQL library of choice. GraphQL Ruby does have documentation about using<a href=\"https:\/\/graphql-ruby.org\/pagination\/custom_connections.html\" target=\"_blank\" rel=\"noreferrer noopener\"> <u>Custom Connections<\/u><\/a>\u2014unfortunately, it\u2019s lacking in the details on how to actually write one. It says what methods must be implemented, but not much else. There are no example code examples to follow along with, and critically, there\u2019s no mention of how the Connection\u2019s cursor and limit arguments are passed in.\u00a0<\/p>\n\n\n\n<p>I\u2019ve found this to be an all too common problem with GraphQL documentation; there\u2019s plentiful high-level documentation on the specification itself, but often not much when it comes to implementation details. In the end, after digging through the GraphQL Ruby API documentation and source code, we were able to complete our first paginated query by creating our own Custom Connection to wrap a search backed by ElasticSearch.<\/p>\n\n\n\n<p>Hopefully this post will help demystify the process of exactly how to implement pagination in GraphQL Ruby using a Custom Connection class.<\/p>\n\n\n\n<h2 id=\"Custom-Connection-classes\">Custom Connection classes<\/h2>\n\n\n\n<p>Custom connections are created by creating a subclass of GraphQL::Pagination::Connection.<\/p>\n\n\n\n<p>There are four methods the subclass must define:<\/p>\n\n\n\n<ul><li><strong>nodes:<\/strong> Returns the paginated collection of items, using the query arguments passed in as instance attributes.<\/li><li><strong>cursor_for(items): <\/strong>Returns the cursor (as a string) for a single item in the collection returned by the nodes method.<\/li><li><strong>has_next_page:<\/strong> Returns a boolean indicating whether there is a next page of results when paginating forward.<\/li><li><strong>has_previous_page:<\/strong> Returns a boolean indicating whether there is a previous page of results when paginating backward.<\/li><\/ul>\n\n\n\n<p>The instance attributes of the class contain everything needed to perform the pagination, including the raw pagination arguments from the query:<\/p>\n\n\n\n<ul><li><strong>after_value:<\/strong> The value for the after argument in the query, which is the cursor to fetch the next page of results that come after this value.<\/li><li><strong>before_value:<\/strong> The value for the before argument in the query, which is the cursor to fetch the next page of results that come before this value.<\/li><li><strong>first_value: <\/strong>The value for the first argument in the query, to fetch the first <em>n<\/em> results.<\/li><li><strong>last_value: <\/strong>The value for the last argument in the query, to fetch the last <em>n<\/em> results.<\/li><li><strong>items:<\/strong> The class the connection was initialized with, which is the collection of items to paginate. The name is a bit misleading, as this can be absolutely anything you want it to be. It could be a full collection of items to paginate, an ActiveRecord model, a database connection, a search class, or whatever else you may need.<\/li><li><strong>max_page_size: <\/strong>This is either the value defined for the specific query being executed if it has its own max page size defined, otherwise it\u2019s the max page size in your schema.<\/li><\/ul>\n\n\n\n<p>Pagination in GraphQL can go either forward or backward. The after_value and first_value attributes and the has_next_page method are used for forward pagination. On the other hand, the before_value and last_value attributes and the has_previous_page method are used when paginating backwards.<\/p>\n\n\n\n<h2 id=\"Creating-a-custom-Connection-class\">Creating a custom Connection class<\/h2>\n\n\n\n<p>To keep this simple, we\u2019ll be creating a Connection to handle paginating a generic ActiveRecord::Relation. We won\u2019t be making any assumptions about the objects contained within that Relation beyond them having a unique ID.<\/p>\n\n\n\n<p><em>Note: GraphQL Ruby does already ship with an <\/em><a href=\"https:\/\/github.com\/rmosolgo\/graphql-ruby\/blob\/master\/lib\/graphql\/pagination\/active_record_relation_connection.rb\"><em>ActiveRecordRelationConnection<\/em><\/a><em> built on top of a generic <\/em><a href=\"https:\/\/github.com\/rmosolgo\/graphql-ruby\/blob\/master\/lib\/graphql\/pagination\/relation_connection.rb\"><em>RelationConnection<\/em><\/a><em>, which uses offset-based pagination. Cursor-based pagination is available in the <\/em><a href=\"https:\/\/graphql-ruby.org\/pagination\/stable_relation_connections.html\"><em>Stable Relation Connections<\/em><\/a><em> offered in the Pro version. We\u2019re building our own version to demonstrate with a collection that any Rails developer should be familiar with.<\/em><\/p>\n\n\n\n<p>We\u2019re also going to start by fully implementing forward pagination before moving on to adding the option to also paginate backwards.<\/p>\n\n\n\n<h3 id=\"Starting-out\">Starting out<\/h3>\n\n\n\n<p>To start, create a brand new Connection subclass anywhere within your GraphQL project:<\/p>\n\n\n\n<figure class=\"wp-block-embed is-type-rich is-provider-embed-handler wp-block-embed-embed-handler\"><div class=\"wp-block-embed__wrapper\">\n<style>.gist table { margin-bottom: 0; }<\/style><div style=\"tab-size: 8\" id=\"gist109084639\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-1977385383_01-rb\" class=\"file my-2\">\n    \n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-ruby  \">\n\n      \n<div >\n  \n  <table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n        <tr>\n          <td id=\"file-1977385383_01-rb-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"><\/td>\n          <td id=\"file-1977385383_01-rb-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>class<\/span> <span class=pl-v>CustomConnection<\/span> &lt; <span class=pl-v>GraphQL<\/span>::<span class=pl-v>Pagination<\/span>::<span class=pl-v>Connection<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_01-rb-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"><\/td>\n          <td id=\"file-1977385383_01-rb-LC2\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>end<\/span><\/td>\n        <\/tr>\n  <\/table>\n<\/div>\n\n\n  <\/div>\n\n  <\/div>\n<\/div>\n\n      <\/div>\n      <div class=\"gist-meta\">\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/44963a32ce6e27f97e87e0da7380bf3b\/raw\/53c964c390c58d18acbed7dffa042c447029355a\/1977385383_01.rb\" style=\"float:right\">view raw<\/a>\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/44963a32ce6e27f97e87e0da7380bf3b#file-1977385383_01-rb\">\n          1977385383_01.rb\n        <\/a>\n        hosted with &#10084; by <a href=\"https:\/\/github.com\">GitHub<\/a>\n      <\/div>\n    <\/div>\n<\/div>\n\n<\/div><\/figure>\n\n\n\n<p>You may also want to set a value for default_max_page_size in your schema if you haven\u2019t already.<\/p>\n\n\n\n<h3 id=\"The-cursor_for-method-and-encoding-a-cursor\">The cursor_for method and encoding a cursor<\/h3>\n\n\n\n<p>This method returns a cursor for a single item in the results. It\u2019s good to start with this method to decide on how you\u2019re going to encode the cursor before you have to decode it once you start work on the nodes method.<\/p>\n\n\n\n<p>How do you decide on what to use as a cursor? It depends on how the underlying collection of objects you\u2019re paginating itself handles sorting, cursors and offsets. Often it depends on how the result is being sorted, and the cursor will be the same field that\u2019s being sorted on. Cursors should also always be unique, otherwise you run the risk of either skipping or duplicating results when there are multiple items with the same cursor. If the value you want to use isn\u2019t unique, combine it with a unique tiebreaker such as an ID to create a unique cursor.<\/p>\n\n\n\n<p>Cursors are also commonly base 64 encoded. It\u2019s not required, but as the GraphQL documentation puts it: it\u2019s a reminder that cursors are opaque and the format should not be relied upon.<\/p>\n\n\n\n<p>In our case, we\u2019re only using the item\u2019s ID, which is unique and makes our method as simple as it gets. It does have to be converted to a string first, however:<\/p>\n\n\n\n<figure class=\"wp-block-embed is-type-rich is-provider-embed-handler wp-block-embed-embed-handler\"><div class=\"wp-block-embed__wrapper\">\n<style>.gist table { margin-bottom: 0; }<\/style><div style=\"tab-size: 8\" id=\"gist109084689\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-1977385383_02-rb\" class=\"file my-2\">\n    \n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-ruby  \">\n\n      \n<div >\n  \n  <table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n        <tr>\n          <td id=\"file-1977385383_02-rb-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"><\/td>\n          <td id=\"file-1977385383_02-rb-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>def<\/span> <span class=pl-en>cursor_for<\/span><span class=pl-kos>(<\/span><span class=pl-s1>item<\/span><span class=pl-kos>)<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_02-rb-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"><\/td>\n          <td id=\"file-1977385383_02-rb-LC2\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-v>Base64<\/span><span class=pl-kos>.<\/span><span class=pl-en>encode64<\/span><span class=pl-kos>(<\/span><span class=pl-s1>item<\/span><span class=pl-kos>.<\/span><span class=pl-en>id<\/span><span class=pl-kos>.<\/span><span class=pl-en>to_s<\/span><span class=pl-kos>)<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_02-rb-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"><\/td>\n          <td id=\"file-1977385383_02-rb-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>end<\/span><\/td>\n        <\/tr>\n  <\/table>\n<\/div>\n\n\n  <\/div>\n\n  <\/div>\n<\/div>\n\n      <\/div>\n      <div class=\"gist-meta\">\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/99900d1598bbac6a9a9f82bd302e3af8\/raw\/331c68fdf9fe67bc45c688e85783d1c4f7c8df88\/1977385383_02.rb\" style=\"float:right\">view raw<\/a>\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/99900d1598bbac6a9a9f82bd302e3af8#file-1977385383_02-rb\">\n          1977385383_02.rb\n        <\/a>\n        hosted with &#10084; by <a href=\"https:\/\/github.com\">GitHub<\/a>\n      <\/div>\n    <\/div>\n<\/div>\n\n<\/div><\/figure>\n\n\n\n<h3 id=\"Paginating-using-the-nodes-method\">Paginating using the nodes method<\/h3>\n\n\n\n<p>This is where the actual pagination happens.<\/p>\n\n\n\n<p>Because we\u2019re only starting out with paginating forward, you\u2019ll only be using the after_value attribute for the cursor and the first_value attribute for the number of results to return. If an after_value wasn\u2019t included in the query, there\u2019s no cursor and the returned results will start from the beginning, and if there\u2019s no first_value to set a page size, you\u2019ll fallback to using the max_page_size.<\/p>\n\n\n\n<p>But, there\u2019s an important consideration before starting: how are you going to determine whether there is a next page or a previous page? That may be easy if the underlying class you\u2019re paginating already gives that to you, or if the full collection of objects is readily available to compare to the paginated result. It\u2019s more difficult if fetching the paginated results requires a potentially expensive database query or network request.<\/p>\n\n\n\n<p>In our case, we found the easiest option was to query for one additional object and memoize the result. This is a common technique in cursor-based pagination; the number of results we return is still limited to the page size, but the presence of that extra object tells us whether there\u2019s another page of results.<\/p>\n\n\n\n<p>We\u2019re going to be using the page size in several places in this class, so it\u2019s helpful to create a short helper method to get the page size from either the first_value or max_page_size to avoid repeating this over and over:<\/p>\n\n\n\n<figure class=\"wp-block-embed is-type-rich is-provider-embed-handler wp-block-embed-embed-handler\"><div class=\"wp-block-embed__wrapper\">\n<style>.gist table { margin-bottom: 0; }<\/style><div style=\"tab-size: 8\" id=\"gist109084700\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-1977385383_03-rb\" class=\"file my-2\">\n    \n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-ruby  \">\n\n      \n<div >\n  \n  <table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n        <tr>\n          <td id=\"file-1977385383_03-rb-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"><\/td>\n          <td id=\"file-1977385383_03-rb-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>def<\/span> <span class=pl-en>page_size<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_03-rb-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"><\/td>\n          <td id=\"file-1977385383_03-rb-LC2\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-c1>@first_value<\/span> || <span class=pl-en>max_page_size<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_03-rb-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"><\/td>\n          <td id=\"file-1977385383_03-rb-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>end<\/span><\/td>\n        <\/tr>\n  <\/table>\n<\/div>\n\n\n  <\/div>\n\n  <\/div>\n<\/div>\n\n      <\/div>\n      <div class=\"gist-meta\">\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/79599a44b922cbd6761dd2649e082cdf\/raw\/cf6544754ca95e86e5c75038f6ef9594e2ab4897\/1977385383_03.rb\" style=\"float:right\">view raw<\/a>\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/79599a44b922cbd6761dd2649e082cdf#file-1977385383_03-rb\">\n          1977385383_03.rb\n        <\/a>\n        hosted with &#10084; by <a href=\"https:\/\/github.com\">GitHub<\/a>\n      <\/div>\n    <\/div>\n<\/div>\n\n<\/div><\/figure>\n\n\n\n<p>Now, create a memoized method to perform the pagination using the cursor and the page size:<\/p>\n\n\n\n<figure class=\"wp-block-embed is-type-rich is-provider-embed-handler wp-block-embed-embed-handler\"><div class=\"wp-block-embed__wrapper\">\n<style>.gist table { margin-bottom: 0; }<\/style><div style=\"tab-size: 8\" id=\"gist109084706\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-1977385383_04-rb\" class=\"file my-2\">\n    \n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-ruby  \">\n\n      \n<div >\n  \n  <table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n        <tr>\n          <td id=\"file-1977385383_04-rb-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"><\/td>\n          <td id=\"file-1977385383_04-rb-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>def<\/span> <span class=pl-en>results<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_04-rb-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"><\/td>\n          <td id=\"file-1977385383_04-rb-LC2\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-c1>@_results<\/span> ||= <span class=pl-k>begin<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_04-rb-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"><\/td>\n          <td id=\"file-1977385383_04-rb-LC3\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-c># If there\u2019s an after cursor, decode it and only query for records with an id that come after that cursor <\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_04-rb-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"><\/td>\n          <td id=\"file-1977385383_04-rb-LC4\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-c1>@items<\/span> <span class=pl-c1>=<\/span> <span class=pl-c1>@items<\/span><span class=pl-kos>.<\/span><span class=pl-en>where<\/span><span class=pl-kos>(<\/span><span class=pl-s>&#39;id &gt; ?&#39;<\/span><span class=pl-kos>,<\/span> <span class=pl-v>Base64<\/span><span class=pl-kos>.<\/span><span class=pl-en>decode64<\/span><span class=pl-kos>(<\/span><span class=pl-c1>@after_value<\/span><span class=pl-kos>)<\/span><span class=pl-kos>)<\/span> <span class=pl-k>if<\/span> <span class=pl-c1>@after_value<\/span><span class=pl-kos>.<\/span><span class=pl-en>present?<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_04-rb-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"><\/td>\n          <td id=\"file-1977385383_04-rb-LC5\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_04-rb-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"><\/td>\n          <td id=\"file-1977385383_04-rb-LC6\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-c1>@items<\/span><span class=pl-kos>.<\/span><span class=pl-en>limit<\/span><span class=pl-kos>(<\/span><span class=pl-en>page_size<\/span> + <span class=pl-c1>1<\/span><span class=pl-kos>)<\/span> <span class=pl-c># Fetch one extra result to determine if there&#39;s another page<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_04-rb-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"><\/td>\n          <td id=\"file-1977385383_04-rb-LC7\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>end<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_04-rb-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"><\/td>\n          <td id=\"file-1977385383_04-rb-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>end<\/span><\/td>\n        <\/tr>\n  <\/table>\n<\/div>\n\n\n  <\/div>\n\n  <\/div>\n<\/div>\n\n      <\/div>\n      <div class=\"gist-meta\">\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/2e2db96d9299477bda78b7516a005bd3\/raw\/451abd42fb6d90e658b2f415b07a122ccb31fe87\/1977385383_04.rb\" style=\"float:right\">view raw<\/a>\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/2e2db96d9299477bda78b7516a005bd3#file-1977385383_04-rb\">\n          1977385383_04.rb\n        <\/a>\n        hosted with &#10084; by <a href=\"https:\/\/github.com\">GitHub<\/a>\n      <\/div>\n    <\/div>\n<\/div>\n\n<\/div><\/figure>\n\n\n\n<p>Once we have all of that, we can write a nodes method that\u2019s only a single line:<\/p>\n\n\n\n<figure class=\"wp-block-embed is-type-rich is-provider-embed-handler wp-block-embed-embed-handler\"><div class=\"wp-block-embed__wrapper\">\n<style>.gist table { margin-bottom: 0; }<\/style><div style=\"tab-size: 8\" id=\"gist109084716\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-1977385383_05-rb\" class=\"file my-2\">\n    \n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-ruby  \">\n\n      \n<div >\n  \n  <table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n        <tr>\n          <td id=\"file-1977385383_05-rb-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"><\/td>\n          <td id=\"file-1977385383_05-rb-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>def<\/span> <span class=pl-en>nodes<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_05-rb-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"><\/td>\n          <td id=\"file-1977385383_05-rb-LC2\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-en>results<\/span><span class=pl-kos>.<\/span><span class=pl-en>slice<\/span><span class=pl-kos>(<\/span><span class=pl-c1>0<\/span><span class=pl-kos>,<\/span> <span class=pl-en>page_size<\/span><span class=pl-kos>)<\/span> <span class=pl-c># Remove the extra result we fetched to check if there&#39;s another page<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_05-rb-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"><\/td>\n          <td id=\"file-1977385383_05-rb-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>end<\/span><\/td>\n        <\/tr>\n  <\/table>\n<\/div>\n\n\n  <\/div>\n\n  <\/div>\n<\/div>\n\n      <\/div>\n      <div class=\"gist-meta\">\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/18486771f6b9a0a7ef4bb2051ad08ff0\/raw\/e70c0ff8c874a57d38347189681e8d7874d50856\/1977385383_05.rb\" style=\"float:right\">view raw<\/a>\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/18486771f6b9a0a7ef4bb2051ad08ff0#file-1977385383_05-rb\">\n          1977385383_05.rb\n        <\/a>\n        hosted with &#10084; by <a href=\"https:\/\/github.com\">GitHub<\/a>\n      <\/div>\n    <\/div>\n<\/div>\n\n<\/div><\/figure>\n\n\n\n<p>Because we fetched one extra result to determine if there was another page, we have to remove it before returning the results. Keep in mind that popping the last result off of the end won\u2019t work\u2014if there were fewer results than the page size, doing so would always remove the last real result.<\/p>\n\n\n\n<h3 id=\"Finishing-the-has_next_page-and-has_previous_page-methods\">Finishing the has_next_page and has_previous_page methods<\/h3>\n\n\n\n<p>All that\u2019s left is finishing the has_next_page and has_previous_page methods, and has_previous_page will always return false because we\u2019re not adding backwards pagination yet.<\/p>\n\n\n\n<p>The only thing has_next_page has to do is check to see if that one extra result we fetched is present. If it is, there will be more results than the page size and we\u2019ll know there\u2019s another page.<\/p>\n\n\n\n<figure class=\"wp-block-embed is-type-rich is-provider-embed-handler wp-block-embed-embed-handler\"><div class=\"wp-block-embed__wrapper\">\n<style>.gist table { margin-bottom: 0; }<\/style><div style=\"tab-size: 8\" id=\"gist109084721\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-1977385383_06-rb\" class=\"file my-2\">\n    \n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-ruby  \">\n\n      \n<div >\n  \n  <table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n        <tr>\n          <td id=\"file-1977385383_06-rb-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"><\/td>\n          <td id=\"file-1977385383_06-rb-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>def<\/span> <span class=pl-en>has_next_page<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_06-rb-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"><\/td>\n          <td id=\"file-1977385383_06-rb-LC2\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-en>results<\/span><span class=pl-kos>.<\/span><span class=pl-en>size<\/span> &gt; <span class=pl-en>page_size<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_06-rb-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"><\/td>\n          <td id=\"file-1977385383_06-rb-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>end<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_06-rb-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"><\/td>\n          <td id=\"file-1977385383_06-rb-LC4\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_06-rb-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"><\/td>\n          <td id=\"file-1977385383_06-rb-LC5\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c># Always return false because we&#39;re not implementing backwards pagination yet<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_06-rb-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"><\/td>\n          <td id=\"file-1977385383_06-rb-LC6\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>def<\/span> <span class=pl-en>has_previous_page<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_06-rb-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"><\/td>\n          <td id=\"file-1977385383_06-rb-LC7\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-c1>false<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_06-rb-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"><\/td>\n          <td id=\"file-1977385383_06-rb-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>end<\/span><\/td>\n        <\/tr>\n  <\/table>\n<\/div>\n\n\n  <\/div>\n\n  <\/div>\n<\/div>\n\n      <\/div>\n      <div class=\"gist-meta\">\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/cb8dab5da3f7b0695058f5c27b53abf3\/raw\/4e9bd9141c6be8656d054079d0ac5941a488538b\/1977385383_06.rb\" style=\"float:right\">view raw<\/a>\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/cb8dab5da3f7b0695058f5c27b53abf3#file-1977385383_06-rb\">\n          1977385383_06.rb\n        <\/a>\n        hosted with &#10084; by <a href=\"https:\/\/github.com\">GitHub<\/a>\n      <\/div>\n    <\/div>\n<\/div>\n\n<\/div><\/figure>\n\n\n\n<h3 id=\"The-full-class\">The full class<\/h3>\n\n\n\n<p>Your Custom Connection is now finished and ready to use:<\/p>\n\n\n\n<figure class=\"wp-block-embed is-type-rich is-provider-embed-handler wp-block-embed-embed-handler\"><div class=\"wp-block-embed__wrapper\">\n<style>.gist table { margin-bottom: 0; }<\/style><div style=\"tab-size: 8\" id=\"gist109084729\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-1977385383_07-rb\" class=\"file my-2\">\n    \n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-ruby  \">\n\n      \n<div >\n  \n  <table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>class<\/span> <span class=pl-v>CustomConnection<\/span> &lt; <span class=pl-v>GraphQL<\/span>::<span class=pl-v>Pagination<\/span>::<span class=pl-v>Connection<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC2\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>def<\/span> <span class=pl-en>nodes<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC3\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-en>results<\/span><span class=pl-kos>.<\/span><span class=pl-en>slice<\/span><span class=pl-kos>(<\/span><span class=pl-c1>0<\/span><span class=pl-kos>,<\/span> <span class=pl-en>page_size<\/span><span class=pl-kos>)<\/span> <span class=pl-c># Remove the extra result we fetched to check if there&#39;s another page<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC4\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>end<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC5\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC6\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>def<\/span> <span class=pl-en>cursor_for<\/span><span class=pl-kos>(<\/span><span class=pl-s1>item<\/span><span class=pl-kos>)<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC7\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-v>Base64<\/span><span class=pl-kos>.<\/span><span class=pl-en>encode64<\/span><span class=pl-kos>(<\/span><span class=pl-s1>item<\/span><span class=pl-kos>.<\/span><span class=pl-en>id<\/span><span class=pl-kos>.<\/span><span class=pl-en>to_s<\/span><span class=pl-kos>)<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC8\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>end<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC9\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC10\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>def<\/span> <span class=pl-en>has_next_page<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC11\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-en>results<\/span><span class=pl-kos>.<\/span><span class=pl-en>size<\/span> &gt; <span class=pl-en>page_size<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC12\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>end<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC13\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC14\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-c># Always return false because we&#39;re not implementing backwards pagination yet<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC15\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>def<\/span> <span class=pl-en>has_previous_page<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L16\" class=\"blob-num js-line-number\" data-line-number=\"16\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC16\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-c1>false<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L17\" class=\"blob-num js-line-number\" data-line-number=\"17\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC17\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>end<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L18\" class=\"blob-num js-line-number\" data-line-number=\"18\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC18\" class=\"blob-code blob-code-inner js-file-line\">  <\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L19\" class=\"blob-num js-line-number\" data-line-number=\"19\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC19\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>def<\/span> <span class=pl-en>page_size<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L20\" class=\"blob-num js-line-number\" data-line-number=\"20\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC20\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-c1>@first_value<\/span> || <span class=pl-en>max_page_size<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L21\" class=\"blob-num js-line-number\" data-line-number=\"21\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC21\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>end<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L22\" class=\"blob-num js-line-number\" data-line-number=\"22\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC22\" class=\"blob-code blob-code-inner js-file-line\">  <\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L23\" class=\"blob-num js-line-number\" data-line-number=\"23\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC23\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>def<\/span> <span class=pl-en>results<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L24\" class=\"blob-num js-line-number\" data-line-number=\"24\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC24\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-c1>@_results<\/span> ||= <span class=pl-k>begin<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L25\" class=\"blob-num js-line-number\" data-line-number=\"25\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC25\" class=\"blob-code blob-code-inner js-file-line\">      <span class=pl-c># If there\u2019s an after cursor, decode it and only query for records with an id that come after that cursor <\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L26\" class=\"blob-num js-line-number\" data-line-number=\"26\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC26\" class=\"blob-code blob-code-inner js-file-line\">      <span class=pl-c1>@items<\/span> <span class=pl-c1>=<\/span> <span class=pl-c1>@items<\/span><span class=pl-kos>.<\/span><span class=pl-en>where<\/span><span class=pl-kos>(<\/span><span class=pl-s>&#39;id &gt; ?&#39;<\/span><span class=pl-kos>,<\/span> <span class=pl-v>Base64<\/span><span class=pl-kos>.<\/span><span class=pl-en>decode64<\/span><span class=pl-kos>(<\/span><span class=pl-c1>@after_value<\/span><span class=pl-kos>)<\/span><span class=pl-kos>)<\/span> <span class=pl-k>if<\/span> <span class=pl-c1>@after_value<\/span><span class=pl-kos>.<\/span><span class=pl-en>present?<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L27\" class=\"blob-num js-line-number\" data-line-number=\"27\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC27\" class=\"blob-code blob-code-inner js-file-line\">      <\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L28\" class=\"blob-num js-line-number\" data-line-number=\"28\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC28\" class=\"blob-code blob-code-inner js-file-line\">      <span class=pl-c1>@items<\/span><span class=pl-kos>.<\/span><span class=pl-en>limit<\/span><span class=pl-kos>(<\/span><span class=pl-en>page_size<\/span> + <span class=pl-c1>1<\/span><span class=pl-kos>)<\/span> <span class=pl-c># Fetch one extra result to determine if there&#39;s another page<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L29\" class=\"blob-num js-line-number\" data-line-number=\"29\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC29\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-k>end<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L30\" class=\"blob-num js-line-number\" data-line-number=\"30\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC30\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>end<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_07-rb-L31\" class=\"blob-num js-line-number\" data-line-number=\"31\"><\/td>\n          <td id=\"file-1977385383_07-rb-LC31\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>end<\/span><\/td>\n        <\/tr>\n  <\/table>\n<\/div>\n\n\n  <\/div>\n\n  <\/div>\n<\/div>\n\n      <\/div>\n      <div class=\"gist-meta\">\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/9ca3d49d99fbb3b7d328122cd780a978\/raw\/cabf1c6837c418187135e4ea44956f2de3f35da3\/1977385383_07.rb\" style=\"float:right\">view raw<\/a>\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/9ca3d49d99fbb3b7d328122cd780a978#file-1977385383_07-rb\">\n          1977385383_07.rb\n        <\/a>\n        hosted with &#10084; by <a href=\"https:\/\/github.com\">GitHub<\/a>\n      <\/div>\n    <\/div>\n<\/div>\n\n<\/div><\/figure>\n\n\n\n<h2 id=\"Using-the-new-connection-class\">Using the new connection class<\/h2>\n\n\n\n<p>To use the new Connection, you\u2019ll add it into a query definition in the QueryType class in your schema. You must call .connection_type on the object being returned by the query to tell GraphQL return a Connection with those objects, then initialize and return the Custom Connection class with the collection you want to paginate in the definition of that query.<\/p>\n\n\n\n<p>For the sake of this example, let\u2019s imagine we have an ApplicationRecord subclass named User and a GraphQL type mapped to that subclass named Customer. The query we\u2019re going to add our Custom Connection to fetches all of the Users, ordered by ID, and returns all of the Customer objects:<\/p>\n\n\n\n<figure class=\"wp-block-embed is-type-rich is-provider-embed-handler wp-block-embed-embed-handler\"><div class=\"wp-block-embed__wrapper\">\n<style>.gist table { margin-bottom: 0; }<\/style><div style=\"tab-size: 8\" id=\"gist109084736\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-1977385383_08-rb\" class=\"file my-2\">\n    \n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-ruby  \">\n\n      \n<div >\n  \n  <table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n        <tr>\n          <td id=\"file-1977385383_08-rb-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"><\/td>\n          <td id=\"file-1977385383_08-rb-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>class<\/span> <span class=pl-v>QueryType<\/span> &lt; <span class=pl-v>GraphQL<\/span>::<span class=pl-v>Schema<\/span>::<span class=pl-v>Object<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_08-rb-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"><\/td>\n          <td id=\"file-1977385383_08-rb-LC2\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-en>field<\/span> <span class=pl-pds>:users<\/span><span class=pl-kos>,<\/span> <span class=pl-v>Types<\/span>::<span class=pl-v>Customer<\/span><span class=pl-kos>.<\/span><span class=pl-en>connection_type<\/span><span class=pl-kos>,<\/span> <span class=pl-pds>null<\/span>: <span class=pl-c1>false<\/span> <span class=pl-k>do<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_08-rb-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"><\/td>\n          <td id=\"file-1977385383_08-rb-LC3\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-en>description<\/span> <span class=pl-s>&quot;Show all customers&quot;<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_08-rb-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"><\/td>\n          <td id=\"file-1977385383_08-rb-LC4\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>end<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_08-rb-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"><\/td>\n          <td id=\"file-1977385383_08-rb-LC5\" class=\"blob-code blob-code-inner js-file-line\">      <\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_08-rb-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"><\/td>\n          <td id=\"file-1977385383_08-rb-LC6\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>def<\/span> <span class=pl-en>employers<\/span><span class=pl-kos>(<\/span><span class=pl-s1>query<\/span>:<span class=pl-kos>)<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_08-rb-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"><\/td>\n          <td id=\"file-1977385383_08-rb-LC7\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-v>CustomConnection<\/span><span class=pl-kos>.<\/span><span class=pl-en>new<\/span><span class=pl-kos>(<\/span><span class=pl-v>User<\/span><span class=pl-kos>.<\/span><span class=pl-en>order<\/span><span class=pl-kos>(<\/span><span class=pl-pds>:id<\/span><span class=pl-kos>)<\/span><span class=pl-kos>)<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_08-rb-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"><\/td>\n          <td id=\"file-1977385383_08-rb-LC8\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>end<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_08-rb-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"><\/td>\n          <td id=\"file-1977385383_08-rb-LC9\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>end<\/span><\/td>\n        <\/tr>\n  <\/table>\n<\/div>\n\n\n  <\/div>\n\n  <\/div>\n<\/div>\n\n      <\/div>\n      <div class=\"gist-meta\">\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/bca0376dbf05230f15e8a6bb8197f1f5\/raw\/d6af2beb9a3e2dc264842af7745627b61f3fbe7e\/1977385383_08.rb\" style=\"float:right\">view raw<\/a>\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/bca0376dbf05230f15e8a6bb8197f1f5#file-1977385383_08-rb\">\n          1977385383_08.rb\n        <\/a>\n        hosted with &#10084; by <a href=\"https:\/\/github.com\">GitHub<\/a>\n      <\/div>\n    <\/div>\n<\/div>\n\n<\/div><\/figure>\n\n\n\n<h2 id=\"Adding-backwards-pagination\">Adding backwards pagination<\/h2>\n\n\n\n<p>If you want to also support backwards pagination, you\u2019ll be using the before_value for the cursor and last_value for the page size. The presence of either of those in the query will indicate that the pagination should be backwards rather than forward.<\/p>\n\n\n\n<p>Like the page size, you\u2019ll be checking the pagination direction all over the place so it\u2019s useful to create another helper method:<\/p>\n\n\n\n<figure class=\"wp-block-embed is-type-rich is-provider-embed-handler wp-block-embed-embed-handler\"><div class=\"wp-block-embed__wrapper\">\n<style>.gist table { margin-bottom: 0; }<\/style><div style=\"tab-size: 8\" id=\"gist109084748\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-1977385383_09-rb\" class=\"file my-2\">\n    \n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-ruby  \">\n\n      \n<div >\n  \n  <table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n        <tr>\n          <td id=\"file-1977385383_09-rb-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"><\/td>\n          <td id=\"file-1977385383_09-rb-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>def<\/span> <span class=pl-en>direction<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_09-rb-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"><\/td>\n          <td id=\"file-1977385383_09-rb-LC2\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>if<\/span> <span class=pl-c1>@before_value<\/span><span class=pl-kos>.<\/span><span class=pl-en>present?<\/span> || <span class=pl-c1>@last_value<\/span><span class=pl-kos>.<\/span><span class=pl-en>present?<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_09-rb-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"><\/td>\n          <td id=\"file-1977385383_09-rb-LC3\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-pds>:backward<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_09-rb-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"><\/td>\n          <td id=\"file-1977385383_09-rb-LC4\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>else<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_09-rb-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"><\/td>\n          <td id=\"file-1977385383_09-rb-LC5\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-c># Fall back to forward by default<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_09-rb-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"><\/td>\n          <td id=\"file-1977385383_09-rb-LC6\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-pds>:forward<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_09-rb-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"><\/td>\n          <td id=\"file-1977385383_09-rb-LC7\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>end<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_09-rb-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"><\/td>\n          <td id=\"file-1977385383_09-rb-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>end<\/span><\/td>\n        <\/tr>\n  <\/table>\n<\/div>\n\n\n  <\/div>\n\n  <\/div>\n<\/div>\n\n      <\/div>\n      <div class=\"gist-meta\">\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/f30175e393ab8920a22c033be4dba18b\/raw\/efc0500be04cf65311cb91bc7577e435191e47a7\/1977385383_09.rb\" style=\"float:right\">view raw<\/a>\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/f30175e393ab8920a22c033be4dba18b#file-1977385383_09-rb\">\n          1977385383_09.rb\n        <\/a>\n        hosted with &#10084; by <a href=\"https:\/\/github.com\">GitHub<\/a>\n      <\/div>\n    <\/div>\n<\/div>\n\n<\/div><\/figure>\n\n\n\n<p>Speaking of the page size, update that method to handle both directions:<\/p>\n\n\n\n<figure class=\"wp-block-embed is-type-rich is-provider-embed-handler wp-block-embed-embed-handler\"><div class=\"wp-block-embed__wrapper\">\n<style>.gist table { margin-bottom: 0; }<\/style><div style=\"tab-size: 8\" id=\"gist109084645\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-1977385383_10-rb\" class=\"file my-2\">\n    \n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-ruby  \">\n\n      \n<div >\n  \n  <table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n        <tr>\n          <td id=\"file-1977385383_10-rb-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"><\/td>\n          <td id=\"file-1977385383_10-rb-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>def<\/span> <span class=pl-en>page_size<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_10-rb-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"><\/td>\n          <td id=\"file-1977385383_10-rb-LC2\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>if<\/span> <span class=pl-en>direction<\/span> == <span class=pl-pds>:forward<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_10-rb-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"><\/td>\n          <td id=\"file-1977385383_10-rb-LC3\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-c1>@first_value<\/span> || <span class=pl-en>max_page_size<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_10-rb-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"><\/td>\n          <td id=\"file-1977385383_10-rb-LC4\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>elsif<\/span> <span class=pl-en>direction<\/span> == <span class=pl-pds>:backward<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_10-rb-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"><\/td>\n          <td id=\"file-1977385383_10-rb-LC5\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-c1>@last_value<\/span> || <span class=pl-en>max_page_size<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_10-rb-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"><\/td>\n          <td id=\"file-1977385383_10-rb-LC6\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>end<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_10-rb-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"><\/td>\n          <td id=\"file-1977385383_10-rb-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>end<\/span><\/td>\n        <\/tr>\n  <\/table>\n<\/div>\n\n\n  <\/div>\n\n  <\/div>\n<\/div>\n\n      <\/div>\n      <div class=\"gist-meta\">\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/643aaece41b742c07cdb249a30ec0cf6\/raw\/91160af3497aad7176312af688bdfc520c9c42a2\/1977385383_10.rb\" style=\"float:right\">view raw<\/a>\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/643aaece41b742c07cdb249a30ec0cf6#file-1977385383_10-rb\">\n          1977385383_10.rb\n        <\/a>\n        hosted with &#10084; by <a href=\"https:\/\/github.com\">GitHub<\/a>\n      <\/div>\n    <\/div>\n<\/div>\n\n<\/div><\/figure>\n\n\n\n<h3 id=\"Updating-the-query\">Updating the query<\/h3>\n\n\n\n<p>Now we can update the querying in our results method to handle both directions:<\/p>\n\n\n\n<figure class=\"wp-block-embed is-type-rich is-provider-embed-handler wp-block-embed-embed-handler\"><div class=\"wp-block-embed__wrapper\">\n<style>.gist table { margin-bottom: 0; }<\/style><div style=\"tab-size: 8\" id=\"gist109084670\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-1977385383_11-rb\" class=\"file my-2\">\n    \n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-ruby  \">\n\n      \n<div >\n  \n  <table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n        <tr>\n          <td id=\"file-1977385383_11-rb-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"><\/td>\n          <td id=\"file-1977385383_11-rb-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>def<\/span> <span class=pl-en>results<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_11-rb-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"><\/td>\n          <td id=\"file-1977385383_11-rb-LC2\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-c1>@_results<\/span> ||= <span class=pl-k>begin<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_11-rb-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"><\/td>\n          <td id=\"file-1977385383_11-rb-LC3\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-k>if<\/span> <span class=pl-en>direction<\/span> == <span class=pl-pds>:forward<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_11-rb-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"><\/td>\n          <td id=\"file-1977385383_11-rb-LC4\" class=\"blob-code blob-code-inner js-file-line\">      <span class=pl-c># If there\u2019s an after cursor, decode it and only query for records with an id that come after that cursor <\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_11-rb-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"><\/td>\n          <td id=\"file-1977385383_11-rb-LC5\" class=\"blob-code blob-code-inner js-file-line\">      <span class=pl-c1>@items<\/span> <span class=pl-c1>=<\/span> <span class=pl-c1>@items<\/span><span class=pl-kos>.<\/span><span class=pl-en>where<\/span><span class=pl-kos>(<\/span><span class=pl-s>&#39;id &gt; ?&#39;<\/span><span class=pl-kos>,<\/span> <span class=pl-v>Base64<\/span><span class=pl-kos>.<\/span><span class=pl-en>decode64<\/span><span class=pl-kos>(<\/span><span class=pl-c1>@after_value<\/span><span class=pl-kos>)<\/span><span class=pl-kos>)<\/span> <span class=pl-k>if<\/span> <span class=pl-c1>@after_value<\/span><span class=pl-kos>.<\/span><span class=pl-en>present?<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_11-rb-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"><\/td>\n          <td id=\"file-1977385383_11-rb-LC6\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-k>elsif<\/span> <span class=pl-en>direction<\/span> == <span class=pl-pds>:backward<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_11-rb-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"><\/td>\n          <td id=\"file-1977385383_11-rb-LC7\" class=\"blob-code blob-code-inner js-file-line\">      <span class=pl-c># If there\u2019s a before cursor, decode it and only query for records with an id that come before that cursor <\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_11-rb-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"><\/td>\n          <td id=\"file-1977385383_11-rb-LC8\" class=\"blob-code blob-code-inner js-file-line\">      <span class=pl-c1>@items<\/span> <span class=pl-c1>=<\/span> <span class=pl-c1>@items<\/span><span class=pl-kos>.<\/span><span class=pl-en>where<\/span><span class=pl-kos>(<\/span><span class=pl-s>&#39;id &lt; ?&#39;<\/span><span class=pl-kos>,<\/span> <span class=pl-v>Base64<\/span><span class=pl-kos>.<\/span><span class=pl-en>decode64<\/span><span class=pl-kos>(<\/span><span class=pl-c1>@before_value<\/span><span class=pl-kos>)<\/span><span class=pl-kos>)<\/span> <span class=pl-k>if<\/span> <span class=pl-c1>@before_value<\/span><span class=pl-kos>.<\/span><span class=pl-en>present?<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_11-rb-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"><\/td>\n          <td id=\"file-1977385383_11-rb-LC9\" class=\"blob-code blob-code-inner js-file-line\">      <span class=pl-c1>@items<\/span> <span class=pl-c1>=<\/span> <span class=pl-c1>@items<\/span><span class=pl-kos>.<\/span><span class=pl-en>reverse_order<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_11-rb-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"><\/td>\n          <td id=\"file-1977385383_11-rb-LC10\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-k>end<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_11-rb-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"><\/td>\n          <td id=\"file-1977385383_11-rb-LC11\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_11-rb-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"><\/td>\n          <td id=\"file-1977385383_11-rb-LC12\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-c1>@items<\/span><span class=pl-kos>.<\/span><span class=pl-en>limit<\/span><span class=pl-kos>(<\/span><span class=pl-en>page_size<\/span> + <span class=pl-c1>1<\/span><span class=pl-kos>)<\/span> <span class=pl-c># Fetch one extra result to determine if there&#39;s another page<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_11-rb-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"><\/td>\n          <td id=\"file-1977385383_11-rb-LC13\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>end<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_11-rb-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"><\/td>\n          <td id=\"file-1977385383_11-rb-LC14\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>end<\/span><\/td>\n        <\/tr>\n  <\/table>\n<\/div>\n\n\n  <\/div>\n\n  <\/div>\n<\/div>\n\n      <\/div>\n      <div class=\"gist-meta\">\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/376996a93e7e6abdd1f013c0c95aae32\/raw\/07f7944f60cc649d3bcc82e4fbe1694b039cf9e4\/1977385383_11.rb\" style=\"float:right\">view raw<\/a>\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/376996a93e7e6abdd1f013c0c95aae32#file-1977385383_11-rb\">\n          1977385383_11.rb\n        <\/a>\n        hosted with &#10084; by <a href=\"https:\/\/github.com\">GitHub<\/a>\n      <\/div>\n    <\/div>\n<\/div>\n\n<\/div><\/figure>\n\n\n\n<p>There are two differences in the backwards query:<\/p>\n\n\n\n<ol><li>The condition in the where clause is reversed to find records with an id that come <em>before<\/em> the cursor.<\/li><li>The ordering of the records is reversed to get the results that come immediately before the cursor. If we skipped this step, the same first results would be returned every time.<\/li><\/ol>\n\n\n\n<h3 id=\"Updating-has_next_page-and-has_previous_page\">Updating has_next_page and has_previous_page<\/h3>\n\n\n\n<p>Supporting backwards pagination means has_previous_page will have to do something other than always returning false. Add the same comparison of the results to the page size to both methods, and also add a new check to always return false unless the pagination is in the correct direction for each:<\/p>\n\n\n\n<figure class=\"wp-block-embed is-type-rich is-provider-embed-handler wp-block-embed-embed-handler\"><div class=\"wp-block-embed__wrapper\">\n<style>.gist table { margin-bottom: 0; }<\/style><div style=\"tab-size: 8\" id=\"gist109084677\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-1977385383_12-rb\" class=\"file my-2\">\n    \n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-ruby  \">\n\n      \n<div >\n  \n  <table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>def<\/span> <span class=pl-en>has_next_page<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC2\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>return<\/span> <span class=pl-c1>false<\/span> <span class=pl-k>unless<\/span> <span class=pl-en>direction<\/span> == <span class=pl-pds>:forward<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC3\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC4\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-en>results<\/span><span class=pl-kos>.<\/span><span class=pl-en>size<\/span> &gt; <span class=pl-en>page_size<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC5\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>end<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC6\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>def<\/span> <span class=pl-en>has_previous_page<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC8\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>return<\/span> <span class=pl-c1>false<\/span> <span class=pl-k>unless<\/span> <span class=pl-en>direction<\/span> == <span class=pl-pds>:backward<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC9\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC10\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-en>results<\/span><span class=pl-kos>.<\/span><span class=pl-en>size<\/span> &gt; <span class=pl-en>page_size<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC11\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>end<\/span><\/td>\n        <\/tr>\n  <\/table>\n<\/div>\n\n\n  <\/div>\n\n  <\/div>\n<\/div>\n\n      <\/div>\n      <div class=\"gist-meta\">\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/5da5d82f552d0f8743e5aacd88d23408\/raw\/4f10f96327619db43dc4ac9cf5c5ee69250e84d4\/1977385383_12.rb\" style=\"float:right\">view raw<\/a>\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/5da5d82f552d0f8743e5aacd88d23408#file-1977385383_12-rb\">\n          1977385383_12.rb\n        <\/a>\n        hosted with &#10084; by <a href=\"https:\/\/github.com\">GitHub<\/a>\n      <\/div>\n    <\/div>\n<\/div>\n\n<\/div><\/figure>\n\n\n\n<h3 id=\"The-fully-completed-class\">The fully completed class<\/h3>\n\n\n\n<p>Here you have it, a fully implemented Custom Connection class supporting both forward and backward pagination:<\/p>\n\n\n\n<figure class=\"wp-block-embed is-type-rich is-provider-embed-handler wp-block-embed-embed-handler\"><div class=\"wp-block-embed__wrapper\">\n<style>.gist table { margin-bottom: 0; }<\/style><div style=\"tab-size: 8\" id=\"gist109084677\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-1977385383_12-rb\" class=\"file my-2\">\n    \n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-ruby  \">\n\n      \n<div >\n  \n  <table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>def<\/span> <span class=pl-en>has_next_page<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC2\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>return<\/span> <span class=pl-c1>false<\/span> <span class=pl-k>unless<\/span> <span class=pl-en>direction<\/span> == <span class=pl-pds>:forward<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC3\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC4\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-en>results<\/span><span class=pl-kos>.<\/span><span class=pl-en>size<\/span> &gt; <span class=pl-en>page_size<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC5\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>end<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC6\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>def<\/span> <span class=pl-en>has_previous_page<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC8\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>return<\/span> <span class=pl-c1>false<\/span> <span class=pl-k>unless<\/span> <span class=pl-en>direction<\/span> == <span class=pl-pds>:backward<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC9\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC10\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-en>results<\/span><span class=pl-kos>.<\/span><span class=pl-en>size<\/span> &gt; <span class=pl-en>page_size<\/span><\/td>\n        <\/tr>\n        <tr>\n          <td id=\"file-1977385383_12-rb-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"><\/td>\n          <td id=\"file-1977385383_12-rb-LC11\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>end<\/span><\/td>\n        <\/tr>\n  <\/table>\n<\/div>\n\n\n  <\/div>\n\n  <\/div>\n<\/div>\n\n      <\/div>\n      <div class=\"gist-meta\">\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/5da5d82f552d0f8743e5aacd88d23408\/raw\/4f10f96327619db43dc4ac9cf5c5ee69250e84d4\/1977385383_12.rb\" style=\"float:right\">view raw<\/a>\n        <a href=\"https:\/\/gist.github.com\/handshake-engineering-blog\/5da5d82f552d0f8743e5aacd88d23408#file-1977385383_12-rb\">\n          1977385383_12.rb\n        <\/a>\n        hosted with &#10084; by <a href=\"https:\/\/github.com\">GitHub<\/a>\n      <\/div>\n    <\/div>\n<\/div>\n\n<\/div><\/figure>\n\n\n\n<h2 id=\"Conclusions\">Conclusions<\/h2>\n\n\n\n<p>Writing your own Custom Connections isn\u2019t all that difficult once you know how it\u2019s done.<\/p>\n\n\n\n<p>Of course, there are plenty of improvements that could be made to the one we just created to make it more useful in the real world. For starters, using an ID as a hardcoded cursor renders it useless for any query that sorts on another field. That could be solved by adding in a method to set the fields used to encode and decode the cursor, for example.<\/p>\n\n\n\n<p>With some small improvements, you could have a re-usable, general purpose Connection. In the long-run, it may even save you time by being the single piece of code responsible for all pagination.<\/p>\n\n\n\n<p><em>Photo by\u00a0<a href=\"https:\/\/www.pexels.com\/@stasknop?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels\" target=\"_blank\" rel=\"noreferrer noopener\">Stas Knop<\/a>\u00a0from\u00a0<a href=\"https:\/\/www.pexels.com\/photo\/white-book-in-white-table-near-yellow-wall-3760323\/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels\" target=\"_blank\" rel=\"noreferrer noopener\">Pexels<\/a><\/em><\/p>\n","protected":false},"excerpt":{"rendered":"<p>Handshake&#8217;s Pierre Maris demystifies the process of how to implement pagination in GraphQL Ruby using a Custom Connection class.<\/p>\n","protected":false},"author":167034976,"featured_media":8932,"menu_order":0,"template":"","our_team_category":[1615],"our_team_tag":[1539,1648],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v16.8 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Implementing Custom Pagination With GraphQL-Ruby | Handshake<\/title>\n<meta name=\"description\" content=\"Handshake&#039;s Pierre Maris demystifies the process of how to implement pagination in GraphQL Ruby using a Custom Connection class.\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Implementing Custom Pagination With GraphQL-Ruby | Handshake\" \/>\n<meta property=\"og:description\" content=\"Handshake&#039;s Pierre Maris demystifies the process of how to implement pagination in GraphQL Ruby using a Custom Connection class.\" \/>\n<meta property=\"og:url\" content=\"https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/\" \/>\n<meta property=\"og:site_name\" content=\"Handshake\" \/>\n<meta property=\"article:publisher\" content=\"https:\/\/www.facebook.com\/joinhandshake\" \/>\n<meta property=\"article:modified_time\" content=\"2021-04-19T21:44:22+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/joinhandshake.com\/wp-content\/uploads\/2021\/04\/pexels-stas-knop-3760323.jpg\" \/>\n\t<meta property=\"og:image:width\" content=\"5410\" \/>\n\t<meta property=\"og:image:height\" content=\"3607\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:site\" content=\"@joinhandshake\" \/>\n<meta name=\"twitter:label1\" content=\"Est. reading time\" \/>\n\t<meta name=\"twitter:data1\" content=\"9 minutes\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/joinhandshake.com\/#organization\",\"name\":\"Handshake\",\"url\":\"https:\/\/joinhandshake.com\/\",\"sameAs\":[\"https:\/\/www.facebook.com\/joinhandshake\",\"https:\/\/www.instagram.com\/joinhandshake\",\"https:\/\/www.linkedin.com\/company\/team-handshake\/\",\"https:\/\/twitter.com\/joinhandshake\"],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/joinhandshake.com\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/i1.wp.com\/joinhandshake.com\/wp-content\/uploads\/2019\/11\/handshake-share.png?fit=1200%2C628&ssl=1\",\"contentUrl\":\"https:\/\/i1.wp.com\/joinhandshake.com\/wp-content\/uploads\/2019\/11\/handshake-share.png?fit=1200%2C628&ssl=1\",\"width\":1200,\"height\":628,\"caption\":\"Handshake\"},\"image\":{\"@id\":\"https:\/\/joinhandshake.com\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/joinhandshake.com\/#website\",\"url\":\"https:\/\/joinhandshake.com\/\",\"name\":\"Handshake\",\"description\":\"\",\"publisher\":{\"@id\":\"https:\/\/joinhandshake.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https:\/\/joinhandshake.com\/?s={search_term_string}\"},\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/i0.wp.com\/joinhandshake.com\/wp-content\/uploads\/2021\/04\/pexels-stas-knop-3760323.jpg?fit=5410%2C3607&ssl=1\",\"contentUrl\":\"https:\/\/i0.wp.com\/joinhandshake.com\/wp-content\/uploads\/2021\/04\/pexels-stas-knop-3760323.jpg?fit=5410%2C3607&ssl=1\",\"width\":5410,\"height\":3607},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/#webpage\",\"url\":\"https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/\",\"name\":\"Implementing Custom Pagination With GraphQL-Ruby | Handshake\",\"isPartOf\":{\"@id\":\"https:\/\/joinhandshake.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/#primaryimage\"},\"datePublished\":\"2021-04-19T21:40:54+00:00\",\"dateModified\":\"2021-04-19T21:44:22+00:00\",\"description\":\"Handshake's Pierre Maris demystifies the process of how to implement pagination in GraphQL Ruby using a Custom Connection class.\",\"breadcrumb\":{\"@id\":\"https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/#breadcrumb\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/\"]}]},{\"@type\":\"BreadcrumbList\",\"@id\":\"https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/#breadcrumb\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"name\":\"Home\",\"item\":\"https:\/\/joinhandshake.com\/\"},{\"@type\":\"ListItem\",\"position\":2,\"name\":\"Implementing Custom Pagination With GraphQL-Ruby\"}]}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"Implementing Custom Pagination With GraphQL-Ruby | Handshake","description":"Handshake's Pierre Maris demystifies the process of how to implement pagination in GraphQL Ruby using a Custom Connection class.","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/","og_locale":"en_US","og_type":"article","og_title":"Implementing Custom Pagination With GraphQL-Ruby | Handshake","og_description":"Handshake's Pierre Maris demystifies the process of how to implement pagination in GraphQL Ruby using a Custom Connection class.","og_url":"https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/","og_site_name":"Handshake","article_publisher":"https:\/\/www.facebook.com\/joinhandshake","article_modified_time":"2021-04-19T21:44:22+00:00","og_image":[{"width":5410,"height":3607,"url":"https:\/\/joinhandshake.com\/wp-content\/uploads\/2021\/04\/pexels-stas-knop-3760323.jpg","path":"\/srv\/htdocs\/wp-content\/uploads\/2021\/04\/pexels-stas-knop-3760323.jpg","size":"full","id":8932,"alt":"","pixels":19513870,"type":"image\/jpeg"}],"twitter_card":"summary_large_image","twitter_site":"@joinhandshake","twitter_misc":{"Est. reading time":"9 minutes"},"schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"Organization","@id":"https:\/\/joinhandshake.com\/#organization","name":"Handshake","url":"https:\/\/joinhandshake.com\/","sameAs":["https:\/\/www.facebook.com\/joinhandshake","https:\/\/www.instagram.com\/joinhandshake","https:\/\/www.linkedin.com\/company\/team-handshake\/","https:\/\/twitter.com\/joinhandshake"],"logo":{"@type":"ImageObject","@id":"https:\/\/joinhandshake.com\/#logo","inLanguage":"en-US","url":"https:\/\/i1.wp.com\/joinhandshake.com\/wp-content\/uploads\/2019\/11\/handshake-share.png?fit=1200%2C628&ssl=1","contentUrl":"https:\/\/i1.wp.com\/joinhandshake.com\/wp-content\/uploads\/2019\/11\/handshake-share.png?fit=1200%2C628&ssl=1","width":1200,"height":628,"caption":"Handshake"},"image":{"@id":"https:\/\/joinhandshake.com\/#logo"}},{"@type":"WebSite","@id":"https:\/\/joinhandshake.com\/#website","url":"https:\/\/joinhandshake.com\/","name":"Handshake","description":"","publisher":{"@id":"https:\/\/joinhandshake.com\/#organization"},"potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https:\/\/joinhandshake.com\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/#primaryimage","inLanguage":"en-US","url":"https:\/\/i0.wp.com\/joinhandshake.com\/wp-content\/uploads\/2021\/04\/pexels-stas-knop-3760323.jpg?fit=5410%2C3607&ssl=1","contentUrl":"https:\/\/i0.wp.com\/joinhandshake.com\/wp-content\/uploads\/2021\/04\/pexels-stas-knop-3760323.jpg?fit=5410%2C3607&ssl=1","width":5410,"height":3607},{"@type":"WebPage","@id":"https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/#webpage","url":"https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/","name":"Implementing Custom Pagination With GraphQL-Ruby | Handshake","isPartOf":{"@id":"https:\/\/joinhandshake.com\/#website"},"primaryImageOfPage":{"@id":"https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/#primaryimage"},"datePublished":"2021-04-19T21:40:54+00:00","dateModified":"2021-04-19T21:44:22+00:00","description":"Handshake's Pierre Maris demystifies the process of how to implement pagination in GraphQL Ruby using a Custom Connection class.","breadcrumb":{"@id":"https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/"]}]},{"@type":"BreadcrumbList","@id":"https:\/\/joinhandshake.com\/blog\/our-team\/implementing-custom-pagination-with-graphql-ruby\/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/joinhandshake.com\/"},{"@type":"ListItem","position":2,"name":"Implementing Custom Pagination With GraphQL-Ruby"}]}]}},"jetpack_sharing_enabled":true,"_links":{"self":[{"href":"https:\/\/joinhandshake.com\/wp-json\/wp\/v2\/our-team\/8923"}],"collection":[{"href":"https:\/\/joinhandshake.com\/wp-json\/wp\/v2\/our-team"}],"about":[{"href":"https:\/\/joinhandshake.com\/wp-json\/wp\/v2\/types\/our-team"}],"author":[{"embeddable":true,"href":"https:\/\/joinhandshake.com\/wp-json\/wp\/v2\/users\/167034976"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/joinhandshake.com\/wp-json\/wp\/v2\/media\/8932"}],"wp:attachment":[{"href":"https:\/\/joinhandshake.com\/wp-json\/wp\/v2\/media?parent=8923"}],"wp:term":[{"taxonomy":"our_team_category","embeddable":true,"href":"https:\/\/joinhandshake.com\/wp-json\/wp\/v2\/our_team_category?post=8923"},{"taxonomy":"our_team_tag","embeddable":true,"href":"https:\/\/joinhandshake.com\/wp-json\/wp\/v2\/our_team_tag?post=8923"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}